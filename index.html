<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>simplesnap by huanglei</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>simple snap</h1>
        <h2></h2>
        <a href="https://github.com/ihuanglei/simplesnap" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>描述</h3>
		  <p>使用flash控制摄像头拍照，上传到服务器，由javascript回调函数控制</p>  
		  <h3>代码</h3>
		  <p>使用了jquery和swfobject类库</p>
		  <pre><code>方法
function shot();//拍照	
function reset();//重置	
参数
active:function active(act);//flash激活
complete:function complete();//完成
progress:function progress(bytesLoaded,bytesTotal);//上传进度
error:function error(e);//错误
uploadUrl:上传图片地址
</code></pre>
示范<br/>
&lt;div id="snapDiv"&gt;&lt;/div&gt;<br/>
&lt;div id="snapBtnsDiv" style="display: none;"&gt;<br/>
	&lt;input id="btn1" type="button" value="拍照" onclick="d0shot();" /&gt;<br/>
	&lt;input id="btn2" type="button" value="5秒自动拍照" onclick="d5shot();" /&gt;<br/>
&lt;/div&gt;<br/>
&lt;div id="snapCommentFormDiv" style="display: none"&gt;<br/>
	&lt;a href="javascript:void(0)" onclick="return reset();"&gt;不满意，重新拍&lt;/a&gt;<br/>
	&lt;input type="button" value="上传" onclick="upload();" /&gt;<br/>
&lt;/div&gt;<br/>

<pre><code>
var sec = 5;

jQuery(document).ready(function(){
	var flashVars = {active:"active",complete:"complete",progress:"progress",error:"error",uploadUrl:"./upload.php"};
	var params = { menu: "false", wmode : "transparent" ,allowScriptAccess: "always"};   
	swfobject.embedSWF("src/snap.swf","snapDiv","450","395","6","expressInstall.swf",flashVars,params);
});

//拍照
function shot(){
	swfobject.getObjectById("snapDiv").shot();
	jQuery("#snapBtnsDiv").slideUp("fast");
	jQuery("#snapCommentFormDiv").slideDown("fast");
}

//重置
function reset(){
	swfobject.getObjectById("snapDiv").reset();
	jQuery("#snapCommentFormDiv").slideUp("fast");
	jQuery("#snapBtnsDiv").slideDown("fast");
	jQuery("#btn1").removeAttr("disabled");
	jQuery("#btn2").removeAttr("disabled");
	return false;
}

//立刻拍照
function d0shot(){
	jQuery("#btn1").attr({"disabled":"disabled"});
	jQuery("#btn2").attr({"disabled":"disabled"});
	shot();
}

//延时拍照
function d5shot(){
	jQuery("#btn2").attr({"disabled":"disabled"});
	jQuery("#btn1").attr({"disabled":"disabled"});
	setTimeout("d()", 1000);
}

//上传
function upload(){
	swfobject.getObjectById("snapDiv").upload();
}

function d(){
	if (sec === 0){
		shot();
		jQuery("#btn2").attr({"value":"5秒自动拍照"});
		sec = 5;
	} else {
		jQuery("#btn2").attr({"value":""+--sec+"秒自动拍照"});
		setTimeout("d()", 1000);
	}
}

//完成
function complete(){
	alert("ok");
}

//图片上传进度
function progress(bytesLoaded,bytesTotal){
	jQuery("#commentta").val(bytesLoaded);
}

function active(act){
	if (act == "ok"){
		jQuery("#snapBtnsDiv").slideDown("fast");
	} else {
		error("选择 允许 才可以在线拍摄照片,<a href='./index.html'>刷新</a>");
	}
}

//错误
function error(e){
	alert(e);
}

</code></pre>
		</section>

        <aside id="sidebar">
          <a href="https://github.com/code-huanglei/SimpleSnap/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/code-huanglei/SimpleSnap/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/code-huanglei/SimpleSnap"></a> is maintained by <a href="https://github.com/code-huanglei">code-huanglei</a>.</p>

        </aside>
      </div>
    </div>

  
  </body>
</html>
